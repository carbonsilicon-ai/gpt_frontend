<template>
  <div class="flex flex-col h-screen bg-muted/40">
    <!-- Main content area with flex-grow to push button to bottom -->
    <div class="w-full px-4 md:px-8 py-6 my-auto">
      <div class="max-w-4xl mx-auto">
        <div class="text-[#162448]">
          <div class="flex flex-col items-center">
            <div v-if="if_ldap" class="mt-2 text-6xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent">
              齐鲁大脑
            </div>
            <div v-else class="mt-2 text-7xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent">
              SciGPT
            </div>

            <!-- Moved ask_button here -->
            <div class="w-full mt-8">
              <div class="max-w-4xl mx-auto">
                <ask_button :docIds="props.docIds" height="high" ref="ask_button_ref"/>
              </div>
            </div>

            <!-- 试试这么问 -->
            <div class="w-full mt-8" v-if="!if_ldap">
              <div class="max-w-4xl mx-auto">
                <div class="text-sm font-medium text-muted-foreground mb-3">试试这么问</div>
                <div class="flex flex-wrap gap-4">   
                  <Card 
                    @click="ask_question('列举C1CC(C=O)CC(C)C1的所有admet属性')"
                    class="shadow-sm hover:shadow-md transition-shadow duration-200 rounded-xl p-2 text-sm text-muted-foreground cursor-pointer hover:bg-accent/50">
                    <div class="flex items-center gap-2">
                      <div class="w-1.5 h-1.5 rounded-full bg-blue-500"></div>
                      列举C1CC(C=O)CC(C)C1的所有admet属性
                    </div>
                  </Card>
                  <Card 
                    @click="ask_question('CC(=O)NC1=CC(OC)=C(O)C=C1这个分子是否已经存在专利')"
                    class="shadow-sm hover:shadow-md transition-shadow duration-200 rounded-xl p-2 text-sm text-muted-foreground cursor-pointer hover:bg-accent/50">
                    <div class="flex items-center gap-2">
                      <div class="w-1.5 h-1.5 rounded-full bg-purple-500"></div>
                      CC(=O)NC1=CC(OC)=C(O)C=C1这个分子是否已经存在专利
                    </div>
                  </Card>
                  <Card 
                    @click="show_question('请介绍知识库中肽-HLA结合预测文章中使用的模型架构，并比较性能')"
                    class="shadow-sm hover:shadow-md transition-shadow duration-200 rounded-xl p-2 text-sm text-muted-foreground cursor-pointer hover:bg-accent/50"
                  >
                    <TooltipProvider :delay-duration="100">
                      <Tooltip>
                        <TooltipTrigger>
                          <div class="flex items-center gap-2">
                            <div class="w-1.5 h-1.5 rounded-full bg-green-500"></div>
                            请介绍知识库中肽-HLA结合预测文章中使用的模型架构，并比较性能
                          </div>
                        </TooltipTrigger>
                        <TooltipContent side="bottom">
                          <p>请选择您自己的知识库</p>
                        </TooltipContent>
                      </Tooltip>
                    </TooltipProvider>
                  </Card>
                </div>
              </div>
            </div>
            <div class="w-full mt-8">
              <div class="max-w-4xl mx-auto">
                <div class="text-sm font-medium text-muted-foreground mb-3">产品特点</div>
              </div>
            </div>
            <!-- Cards moved below the button -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4 md:gap-5 w-full max-w-4xl">
              <Card class="rounded-2xl shadow-none">
                <CardContent class="pt-6">
                  <div class="flex items-center gap-4">
                    <div class="w-[64px] h-[64px] bg-accent rounded-xl p-2 flex-shrink-0">
                      <svg fill="#8B00FF" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg">
                        <path d="M597.333248 256a17.066667 17.066667 0 0 0 17.066667-17.066667c0-24.8832 26.3168-51.2 51.2-51.2a17.066667 17.066667 0 0 0 0-34.133333c-43.861333 0-85.333333 41.472-85.333334 85.333333a17.066667 17.066667 0 0 0 17.066667 17.066667M767.999915 614.4a17.066667 17.066667 0 0 0 0 34.133333c24.8832 0 51.2 26.3168 51.2 51.2a17.066667 17.066667 0 0 0 34.133333 0c0-43.861333-41.472-85.333333-85.333333-85.333333M836.266581 409.6a17.066667 17.066667 0 0 0-17.066666 17.066667c0 24.8832-26.3168 51.2-51.2 51.2a17.066667 17.066667 0 0 0 0 34.133333c43.861333 0 85.333333-41.472 85.333333-85.333333a17.066667 17.066667 0 0 0-17.066667-17.066667M665.599915 477.866667a17.066667 17.066667 0 0 0 0-34.133334c-24.8832 0-51.2-26.3168-51.2-51.2a17.066667 17.066667 0 0 0-34.133334 0c0 43.861333 41.472 85.333333 85.333334 85.333334M597.333248 682.666667a17.066667 17.066667 0 0 0 17.066667-17.066667c0-24.8832 26.3168-51.2 51.2-51.2a17.066667 17.066667 0 0 0 0-34.133333c-43.861333 0-85.333333 41.472-85.333334 85.333333a17.066667 17.066667 0 0 0 17.066667 17.066667M802.133248 307.2c-24.8832 0-51.2-26.3168-51.2-51.2a17.066667 17.066667 0 0 0-34.133333 0c0 43.861333 41.472 85.333333 85.333333 85.333333a17.066667 17.066667 0 0 0 0-34.133333M648.533248 768a17.066667 17.066667 0 0 0 17.066667 17.066667c24.8832 0 51.2 26.3168 51.2 51.2a17.066667 17.066667 0 0 0 34.133333 0c0-43.861333-41.472-85.333333-85.333333-85.333334a17.066667 17.066667 0 0 0-17.066667 17.066667"></path>
                        <path d="M949.469781 635.648A118.8352 118.8352 0 0 0 989.866581 546.133333a118.272 118.272 0 0 0-44.117333-92.603733A101.307733 101.307733 0 0 0 955.733248 409.6a102.485333 102.485333 0 0 0-47.650133-86.186667A101.085867 101.085867 0 0 0 921.599915 273.066667a102.0928 102.0928 0 0 0-68.4544-96.443734A102.5024 102.5024 0 0 0 750.933248 68.266667c-13.7728 0-27.1872 2.798933-39.7312 8.192C696.558848 32.017067 654.318848 0 605.866581 0c-71.816533 0-103.748267 64.785067-110.609066 99.054933-0.1024 0.5632 0.068267 1.109333 0 1.6896-0.0512 0.5632-0.324267 1.058133-0.324267 1.655467v801.109333c-3.857067 48.452267-45.0048 86.357333-93.866667 86.357334-48.674133 0-89.7024-38.058667-93.422933-86.6304C306.978048 894.344533 299.059115 887.466667 290.133248 887.466667c-5.3248 0-10.3424 2.491733-13.585067 6.724266A68.352 68.352 0 0 1 221.866581 921.6c-37.649067 0-68.266667-30.6176-68.266666-68.266667 0-15.496533 5.393067-30.3104 15.633066-42.8544a17.066667 17.066667 0 0 0-17.117866-27.392A68.5568 68.5568 0 0 1 136.533248 785.066667c-37.649067 0-68.266667-30.6176-68.266667-68.266667 0-28.142933 17.8688-53.742933 44.458667-63.709867a17.066667 17.066667 0 0 0 1.826133-31.146666A85.077333 85.077333 0 0 1 68.266581 546.133333c0-30.1056 15.479467-57.412267 41.403734-73.045333a17.066667 17.066667 0 0 0 5.1712-24.405333A67.822933 67.822933 0 0 1 102.399915 409.6a68.4032 68.4032 0 0 1 44.9024-63.8464 17.066667 17.066667 0 0 0 6.843733-27.409067A67.976533 67.976533 0 0 1 136.533248 273.066667a68.027733 68.027733 0 0 1 56.337067-67.0208 17.117867 17.117867 0 0 0 13.687466-20.514134A68.420267 68.420267 0 0 1 204.799915 170.666667c0-37.649067 30.6176-68.266667 68.266666-68.266667 14.779733 0 29.0304 4.932267 41.233067 14.267733 4.949333 3.7888 11.588267 4.5568 17.288533 2.048 5.700267-2.542933 9.5744-7.9872 10.0864-14.199466C344.934315 65.041067 378.521515 34.133333 418.133248 34.133333c19.012267 0 34.747733 6.109867 48.059733 18.670934a17.066667 17.066667 0 0 0 23.415467-24.832C469.930581 9.403733 445.883648 0 418.133248 0c-48.452267 0-90.692267 32.017067-105.335467 76.458667A100.232533 100.232533 0 0 0 273.066581 68.266667a102.5024 102.5024 0 0 0-102.212266 108.356266A102.0928 102.0928 0 0 0 102.399915 273.066667c0 17.698133 4.7104 35.003733 13.499733 50.346666A102.5536 102.5536 0 0 0 68.266581 409.6c0 15.3088 3.413333 30.225067 9.984 43.9296A118.272 118.272 0 0 0 34.133248 546.133333c0 34.850133 14.967467 67.157333 40.3968 89.514667A102.570667 102.570667 0 0 0 34.133248 716.8a102.536533 102.536533 0 0 0 91.528533 101.819733A99.601067 99.601067 0 0 0 119.466581 853.333333c0 56.4736 45.9264 102.4 102.4 102.4a101.649067 101.649067 0 0 0 58.299734-18.2272C297.557248 987.921067 345.685248 1024 401.066581 1024c66.696533 0 122.897067-51.9168 127.9488-118.1696 0.017067-0.221867-0.085333-0.426667-0.085333-0.648533 0.017067-0.238933 0.136533-0.4096 0.136533-0.648534V104.311467C531.558315 93.883733 548.403115 34.133333 605.866581 34.133333c39.611733 0 73.198933 30.907733 76.458667 70.382934 0.512 6.212267 4.386133 11.656533 10.0864 14.199466 5.6832 2.5088 12.322133 1.7408 17.288533-2.048A67.464533 67.464533 0 0 1 750.933248 102.4c37.649067 0 68.266667 30.6176 68.266667 68.266667 0 4.676267-0.580267 9.540267-1.757867 14.865066a17.117867 17.117867 0 0 0 13.687467 20.514134A68.027733 68.027733 0 0 1 887.466581 273.066667c0 16.520533-6.263467 32.597333-17.6128 45.277866a17.083733 17.083733 0 0 0 6.843734 27.409067A68.4032 68.4032 0 0 1 921.599915 409.6c0 13.960533-4.3008 27.460267-12.4416 39.082667a17.1008 17.1008 0 0 0 5.1712 24.405333A84.718933 84.718933 0 0 1 955.733248 546.133333a85.077333 85.077333 0 0 1-46.2848 75.810134 17.066667 17.066667 0 0 0 1.826133 31.146666C937.864448 663.057067 955.733248 688.657067 955.733248 716.8c0 37.649067-30.6176 68.266667-68.266667 68.266667-4.7616 0-9.864533-0.648533-15.581866-1.979734a17.066667 17.066667 0 1 0-17.1008 27.392c10.222933 12.544 15.616 27.357867 15.616 42.8544 0 37.649067-30.6176 68.266667-68.266667 68.266667-21.572267 0-41.454933-10.103467-54.5792-27.733333a17.152 17.152 0 0 0-19.063467-6.007467 17.237333 17.237333 0 0 0-6.519466 3.976533 16.9472 16.9472 0 0 0-5.614934 11.400534C712.635648 951.808 671.607381 989.866667 622.933248 989.866667a93.457067 93.457067 0 0 1-58.538667-20.3776 17.066667 17.066667 0 1 0-21.179733 26.760533A128.989867 128.989867 0 0 0 622.933248 1024c55.415467 0 103.5776-36.1472 120.9344-86.613333A100.744533 100.744533 0 0 0 802.133248 955.733333c56.4736 0 102.4-45.9264 102.4-102.4 0-11.9808-2.0992-23.6544-6.1952-34.7136A102.536533 102.536533 0 0 0 989.866581 716.8a102.570667 102.570667 0 0 0-40.3968-81.152"></path>
                        <path d="M358.399915 153.6a17.066667 17.066667 0 0 0 0 34.133333c24.8832 0 51.2 26.3168 51.2 51.2a17.066667 17.066667 0 0 0 34.133333 0c0-43.861333-41.472-85.333333-85.333333-85.333333M187.733248 716.8a17.066667 17.066667 0 0 0 17.066667-17.066667c0-24.8832 26.3168-51.2 51.2-51.2a17.066667 17.066667 0 0 0 0-34.133333c-43.861333 0-85.333333 41.472-85.333334 85.333333a17.066667 17.066667 0 0 0 17.066667 17.066667M187.733248 409.6a17.066667 17.066667 0 0 0-17.066667 17.066667c0 43.861333 41.472 85.333333 85.333334 85.333333a17.066667 17.066667 0 0 0 0-34.133333c-24.8832 0-51.2-26.3168-51.2-51.2a17.066667 17.066667 0 0 0-17.066667-17.066667M426.666581 375.466667a17.066667 17.066667 0 0 0-17.066666 17.066666c0 24.8832-26.3168 51.2-51.2 51.2a17.066667 17.066667 0 0 0 0 34.133334c43.861333 0 85.333333-41.472 85.333333-85.333334a17.066667 17.066667 0 0 0-17.066667-17.066666M409.599915 665.6a17.066667 17.066667 0 0 0 34.133333 0c0-43.861333-41.472-85.333333-85.333333-85.333333a17.066667 17.066667 0 0 0 0 34.133333c24.8832 0 51.2 26.3168 51.2 51.2M307.199915 256a17.066667 17.066667 0 0 0-34.133334 0c0 24.8832-26.3168 51.2-51.2 51.2a17.066667 17.066667 0 0 0 0 34.133333c43.861333 0 85.333333-41.472 85.333334-85.333333M290.133248 853.333333a17.066667 17.066667 0 0 0 17.066667-17.066666c0-24.8832 26.3168-51.2 51.2-51.2a17.066667 17.066667 0 0 0 0-34.133334c-43.861333 0-85.333333 41.472-85.333334 85.333334a17.066667 17.066667 0 0 0 17.066667 17.066666" p-id="1494"></path>
                      </svg>
                    </div>
                    <div>
                      <h3 class="font-medium">接入DeepSeek R1</h3>
                      <p class="text-sm text-muted-foreground mt-1">让对话更智能、更流畅</p>
                    </div>
                  </div>
                </CardContent>
              </Card>

              <Card class="rounded-2xl shadow-none">
                <CardContent class="pt-6">
                  <div class="flex items-center gap-4">
                    <div class="w-[64px] h-[64px] bg-accent rounded-xl p-2 flex-shrink-0">
                      <svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg">
                        <path fill="#e0620d" d="M881.777778 765.155556c-76.8-5.688889-150.755556-34.133333-210.488889-85.333334-116.622222 25.6-227.555556 62.577778-338.488889 108.088889-88.177778 156.444444-170.666667 236.088889-241.777778 236.088889-14.222222 0-31.288889-2.844444-42.666666-11.377778C17.066667 998.4 0 967.111111 0 935.822222c0-25.6 5.688889-96.711111 275.911111-213.333333 62.577778-113.777778 110.933333-230.4 150.755556-352.711111-34.133333-68.266667-108.088889-236.088889-56.888889-321.422222C386.844444 17.066667 420.977778 0 457.955556 2.844444c28.444444 0 56.888889 14.222222 73.955555 36.977778 36.977778 51.2 34.133333 159.288889-14.222222 318.577778 45.511111 85.333333 105.244444 162.133333 176.355555 227.555556 59.733333-11.377778 119.466667-19.911111 179.2-19.911112 133.688889 2.844444 153.6 65.422222 150.755556 102.4 0 96.711111-93.866667 96.711111-142.222222 96.711112zM85.333333 941.511111l8.533334-2.844444c39.822222-14.222222 71.111111-42.666667 93.866666-79.644445-42.666667 17.066667-76.8 45.511111-102.4 82.488889z m378.311111-853.333333H455.111111c-2.844444 0-8.533333 0-11.377778 2.844444-11.377778 48.355556-2.844444 99.555556 17.066667 145.066667 17.066667-48.355556 17.066667-99.555556 2.844444-147.911111z m19.911112 412.444444l-2.844445 5.688889-2.844444-2.844444c-25.6 65.422222-54.044444 130.844444-85.333334 193.422222l5.688889-2.844445v5.688889c62.577778-22.755556 130.844444-42.666667 193.422222-56.888889l-2.844444-2.844444h8.533333c-42.666667-42.666667-82.488889-91.022222-113.777777-139.377778z m386.844444 150.755556c-25.6 0-48.355556 0-73.955556 5.688889 28.444444 14.222222 56.888889 19.911111 85.333334 22.755555 19.911111 2.844444 39.822222 0 56.888889-5.688889 0-8.533333-11.377778-22.755556-68.266667-22.755555z"/>
                      </svg>
                    </div>
                    <div>
                      <h3 class="font-medium">精准PDF解析</h3>
                      <p class="text-sm text-muted-foreground mt-1">采用多个模型高精度还原PDF</p>
                    </div>
                  </div>
                </CardContent>
              </Card>

              <Card class="rounded-2xl shadow-none">
                <CardContent class="pt-6">
                  <div class="flex items-center gap-4">
                    <div class="w-[64px] h-[64px] bg-accent rounded-xl p-2 flex-shrink-0">
                      <svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg">
                        <path fill="#1296db" d="M563.2 819.2a102.4 102.4 0 1 1 0 204.8 102.4 102.4 0 0 1 0-204.8z m-320.4608-153.6a128 128 0 1 1 0 256 128 128 0 0 1 0-256z m592.7936 25.6a102.4 102.4 0 1 1 0 204.8 102.4 102.4 0 0 1 0-204.8zM947.2 477.1328a76.8 76.8 0 1 1 0 153.6 76.8 76.8 0 0 1 0-153.6zM128 307.2a128 128 0 1 1 0 256 128 128 0 0 1 0-256z m782.6432-40.6016a51.2 51.2 0 1 1 0 102.4 51.2 51.2 0 0 1 0-102.4zM409.6 0a153.6 153.6 0 1 1 0 307.2 153.6 153.6 0 0 1 0-307.2z m384 153.6a25.6 25.6 0 1 1 0 51.2 25.6 25.6 0 0 1 0-51.2z"/>
                      </svg>
                    </div>
                    <div>
                      <h3 class="font-medium">智能联网搜索</h3>
                      <p class="text-sm text-muted-foreground mt-1">智能联网，快速响应</p>
                    </div>
                  </div>
                </CardContent>
              </Card>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <avatar />
</template>

<script setup lang="ts">
import { Card, CardContent } from '@/components/ui/card'
import ask_button from '@/pages/ask/ask_button.vue'
import { useStore } from '@/stores/index.js'
import avatar from '@/pages/ask/components/avatar.vue'
import {
  Tooltip,
  TooltipContent,
  TooltipProvider,
  TooltipTrigger,
} from "@/components/ui/tooltip"

const store = useStore()

const props = defineProps({
  docIds: {
    type: Array as PropType<string[]>,
    default: () => []
  }
})

const ask_button_ref = ref(null)
store.channel_id = ''

const if_ldap = ref(false)

if (import.meta.env.VITE_APP_ENV === 'ldap') {
  if_ldap.value = true
}

const ask_question = (question: string) => {
  ask_button_ref.value?.ask_question(question)
}

const show_question = (question: string) => {
  ask_button_ref.value?.show_question(question)
}

</script>